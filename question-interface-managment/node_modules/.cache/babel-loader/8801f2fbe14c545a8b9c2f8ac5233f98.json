{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = __importStar(require(\"react\"));\n\nvar ReactDOM = __importStar(require(\"react-dom\"));\n\nvar utils_1 = require(\"./utils\");\n\nvar AUTOSCROLL_ACTIVE_OFFSET = 200;\nvar AUTOSCROLL_SPEED_RATIO = 10;\n\nvar List =\n/** @class */\nfunction (_super) {\n  __extends(List, _super);\n\n  function List(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.listRef = React.createRef();\n    _this.ghostRef = React.createRef();\n    _this.topOffsets = [];\n    _this.itemTranslateOffsets = [];\n    _this.initialYOffset = 0;\n    _this.lastScroll = 0;\n    _this.lastYOffset = 0;\n    _this.lastListYOffset = 0;\n    _this.needle = -1;\n    _this.afterIndex = -2;\n    _this.state = {\n      itemDragged: -1,\n      itemDraggedOutOfBounds: -1,\n      selectedItem: -1,\n      initialX: 0,\n      initialY: 0,\n      targetX: 0,\n      targetY: 0,\n      targetHeight: 0,\n      targetWidth: 0,\n      liveText: '',\n      scrollingSpeed: 0,\n      scrollWindow: false\n    };\n\n    _this.doScrolling = function () {\n      var _a = _this.state,\n          scrollingSpeed = _a.scrollingSpeed,\n          scrollWindow = _a.scrollWindow;\n      var listEl = _this.listRef.current;\n      window.requestAnimationFrame(function () {\n        if (scrollWindow) {\n          window.scrollTo(window.pageXOffset, window.pageYOffset + scrollingSpeed * 1.5);\n        } else {\n          listEl.scrollTop += scrollingSpeed;\n        }\n\n        if (scrollingSpeed !== 0) {\n          _this.doScrolling();\n        }\n      });\n    };\n\n    _this.getChildren = function () {\n      if (_this.listRef && _this.listRef.current) {\n        return Array.from(_this.listRef.current.children);\n      }\n\n      console.warn('No items found in the List container. Did you forget to pass & spread the `props` param in renderList?');\n      return [];\n    };\n\n    _this.calculateOffsets = function () {\n      _this.topOffsets = _this.getChildren().map(function (item) {\n        return item.getBoundingClientRect().top;\n      });\n      _this.itemTranslateOffsets = _this.getChildren().map(function (item) {\n        return utils_1.getTranslateOffset(item);\n      });\n    };\n\n    _this.getTargetIndex = function (e) {\n      return _this.getChildren().findIndex(function (child) {\n        return child === e.target || child.contains(e.target);\n      });\n    };\n\n    _this.onMouseOrTouchStart = function (e) {\n      if (_this.dropTimeout && _this.state.itemDragged > -1) {\n        window.clearTimeout(_this.dropTimeout);\n\n        _this.finishDrop();\n      }\n\n      var isTouch = utils_1.isTouchEvent(e);\n      if (!isTouch && e.button !== 0) return;\n\n      var index = _this.getTargetIndex(e);\n\n      if (index === -1 || // @ts-ignore\n      _this.props.values[index] && _this.props.values[index].disabled) return;\n\n      var listItemTouched = _this.getChildren()[index];\n\n      var handle = listItemTouched.querySelector('[data-movable-handle]');\n\n      if (handle && !handle.contains(e.target)) {\n        return;\n      }\n\n      if (utils_1.checkIfInteractive(e.target, listItemTouched)) {\n        return;\n      }\n\n      e.preventDefault();\n      _this.props.beforeDrag && _this.props.beforeDrag({\n        elements: _this.getChildren(),\n        index: index\n      });\n\n      if (isTouch) {\n        var opts = {\n          passive: false\n        };\n        document.addEventListener('touchend', _this.schdOnEnd, opts);\n        document.addEventListener('touchmove', _this.schdOnTouchMove, opts);\n        document.addEventListener('touchcancel', _this.schdOnEnd, opts);\n      } else {\n        document.addEventListener('mousemove', _this.schdOnMouseMove);\n        document.addEventListener('mouseup', _this.schdOnEnd);\n      }\n\n      _this.onStart(listItemTouched, isTouch ? e.touches[0].clientX : e.clientX, isTouch ? e.touches[0].clientY : e.clientY, index);\n    };\n\n    _this.getYOffset = function () {\n      var listScroll = _this.listRef.current ? _this.listRef.current.scrollTop : 0;\n      return window.pageYOffset + listScroll;\n    };\n\n    _this.onStart = function (target, clientX, clientY, index) {\n      if (_this.state.selectedItem > -1) {\n        _this.setState({\n          selectedItem: -1\n        });\n\n        _this.needle = -1;\n      }\n\n      var targetRect = target.getBoundingClientRect();\n      var targetStyles = window.getComputedStyle(target);\n\n      _this.calculateOffsets();\n\n      _this.initialYOffset = _this.getYOffset();\n      _this.lastYOffset = window.pageYOffset;\n      _this.lastListYOffset = _this.listRef.current.scrollTop;\n\n      _this.setState({\n        itemDragged: index,\n        targetX: targetRect.left - parseInt(targetStyles['margin-left'], 10),\n        targetY: targetRect.top - parseInt(targetStyles['margin-top'], 10),\n        targetHeight: targetRect.height,\n        targetWidth: targetRect.width,\n        initialX: clientX,\n        initialY: clientY\n      });\n    };\n\n    _this.onMouseMove = function (e) {\n      e.cancelable && e.preventDefault();\n\n      _this.onMove(e.clientX, e.clientY);\n    };\n\n    _this.onTouchMove = function (e) {\n      e.cancelable && e.preventDefault();\n\n      _this.onMove(e.touches[0].clientX, e.touches[0].clientY);\n    };\n\n    _this.onWheel = function (e) {\n      if (_this.state.itemDragged < 0) return;\n      _this.lastScroll = _this.listRef.current.scrollTop += e.deltaY;\n\n      _this.moveOtherItems();\n    };\n\n    _this.onMove = function (clientX, clientY) {\n      if (_this.state.itemDragged === -1) return null;\n      utils_1.transformItem(_this.ghostRef.current, clientY - _this.state.initialY, _this.props.lockVertically ? 0 : clientX - _this.state.initialX);\n\n      _this.autoScrolling(clientY);\n\n      _this.moveOtherItems();\n    };\n\n    _this.moveOtherItems = function () {\n      var targetRect = _this.ghostRef.current.getBoundingClientRect();\n\n      var itemVerticalCenter = targetRect.top + targetRect.height / 2;\n      var offset = utils_1.getTranslateOffset(_this.getChildren()[_this.state.itemDragged]);\n\n      var currentYOffset = _this.getYOffset(); // adjust offsets if scrolling happens during the item movement\n\n\n      if (_this.initialYOffset !== currentYOffset) {\n        _this.topOffsets = _this.topOffsets.map(function (offset) {\n          return offset - (currentYOffset - _this.initialYOffset);\n        });\n        _this.initialYOffset = currentYOffset;\n      }\n\n      if (_this.isDraggedItemOutOfBounds() && _this.props.removableByMove) {\n        _this.afterIndex = _this.topOffsets.length + 1;\n      } else {\n        _this.afterIndex = utils_1.binarySearch(_this.topOffsets, itemVerticalCenter);\n      }\n\n      _this.animateItems(_this.afterIndex === -1 ? 0 : _this.afterIndex, _this.state.itemDragged, offset);\n    };\n\n    _this.autoScrolling = function (clientY) {\n      var _a = _this.listRef.current.getBoundingClientRect(),\n          top = _a.top,\n          bottom = _a.bottom,\n          height = _a.height;\n\n      var viewportHeight = window.innerHeight || document.documentElement.clientHeight; // autoscrolling for the window (down)\n\n      if (bottom > viewportHeight && viewportHeight - clientY < AUTOSCROLL_ACTIVE_OFFSET) {\n        _this.setState({\n          scrollingSpeed: Math.round((AUTOSCROLL_ACTIVE_OFFSET - (viewportHeight - clientY)) / AUTOSCROLL_SPEED_RATIO),\n          scrollWindow: true\n        }); // autoscrolling for the window (up)\n\n      } else if (top < 0 && clientY < AUTOSCROLL_ACTIVE_OFFSET) {\n        _this.setState({\n          scrollingSpeed: Math.round((AUTOSCROLL_ACTIVE_OFFSET - clientY) / -AUTOSCROLL_SPEED_RATIO),\n          scrollWindow: true\n        });\n      } else {\n        if (_this.state.scrollWindow && _this.state.scrollingSpeed !== 0) {\n          _this.setState({\n            scrollingSpeed: 0,\n            scrollWindow: false\n          });\n        } // autoscrolling for containers with overflow\n\n\n        if (height + 20 < _this.listRef.current.scrollHeight) {\n          var scrollingSpeed = 0;\n\n          if (clientY - top < AUTOSCROLL_ACTIVE_OFFSET) {\n            scrollingSpeed = Math.round((AUTOSCROLL_ACTIVE_OFFSET - (clientY - top)) / -AUTOSCROLL_SPEED_RATIO);\n          } else if (bottom - clientY < AUTOSCROLL_ACTIVE_OFFSET) {\n            scrollingSpeed = Math.round((AUTOSCROLL_ACTIVE_OFFSET - (bottom - clientY)) / AUTOSCROLL_SPEED_RATIO);\n          }\n\n          if (_this.state.scrollingSpeed !== scrollingSpeed) {\n            _this.setState({\n              scrollingSpeed: scrollingSpeed\n            });\n          }\n        }\n      }\n    };\n\n    _this.animateItems = function (needle, movedItem, offset, animateMovedItem) {\n      if (animateMovedItem === void 0) {\n        animateMovedItem = false;\n      }\n\n      _this.getChildren().forEach(function (item, i) {\n        utils_1.setItemTransition(item, _this.props.transitionDuration);\n\n        if (movedItem === i && animateMovedItem) {\n          if (movedItem === needle) {\n            return utils_1.transformItem(item, null);\n          }\n\n          utils_1.transformItem(item, movedItem < needle ? _this.itemTranslateOffsets.slice(movedItem + 1, needle + 1).reduce(function (a, b) {\n            return a + b;\n          }, 0) : _this.itemTranslateOffsets.slice(needle, movedItem).reduce(function (a, b) {\n            return a + b;\n          }, 0) * -1);\n        } else if (movedItem < needle && i > movedItem && i <= needle) {\n          utils_1.transformItem(item, -offset);\n        } else if (i < movedItem && movedItem > needle && i >= needle) {\n          utils_1.transformItem(item, offset);\n        } else {\n          utils_1.transformItem(item, null);\n        }\n      });\n    };\n\n    _this.isDraggedItemOutOfBounds = function () {\n      var initialRect = _this.getChildren()[_this.state.itemDragged].getBoundingClientRect();\n\n      var targetRect = _this.ghostRef.current.getBoundingClientRect();\n\n      if (Math.abs(initialRect.left - targetRect.left) > targetRect.width) {\n        if (_this.state.itemDraggedOutOfBounds === -1) {\n          _this.setState({\n            itemDraggedOutOfBounds: _this.state.itemDragged\n          });\n        }\n\n        return true;\n      }\n\n      if (_this.state.itemDraggedOutOfBounds > -1) {\n        _this.setState({\n          itemDraggedOutOfBounds: -1\n        });\n      }\n\n      return false;\n    };\n\n    _this.onEnd = function (e) {\n      e.cancelable && e.preventDefault();\n      document.removeEventListener('mousemove', _this.schdOnMouseMove);\n      document.removeEventListener('touchmove', _this.schdOnTouchMove);\n      document.removeEventListener('mouseup', _this.schdOnEnd);\n      document.removeEventListener('touchup', _this.schdOnEnd);\n      document.removeEventListener('touchcancel', _this.schdOnEnd);\n\n      var removeItem = _this.props.removableByMove && _this.isDraggedItemOutOfBounds();\n\n      if (!removeItem && _this.props.transitionDuration > 0 && _this.afterIndex !== -2) {\n        // animate drop\n        utils_1.schd(function () {\n          utils_1.setItemTransition(_this.ghostRef.current, _this.props.transitionDuration, 'cubic-bezier(.2,1,.1,1)');\n\n          if (_this.afterIndex < 1 && _this.state.itemDragged === 0) {\n            utils_1.transformItem(_this.ghostRef.current, 0, 0);\n          } else {\n            utils_1.transformItem(_this.ghostRef.current, // compensate window scroll\n            -(window.pageYOffset - _this.lastYOffset) + // compensate container scroll\n            -(_this.listRef.current.scrollTop - _this.lastListYOffset) + (_this.state.itemDragged < _this.afterIndex ? _this.itemTranslateOffsets.slice(_this.state.itemDragged + 1, _this.afterIndex + 1).reduce(function (a, b) {\n              return a + b;\n            }, 0) : _this.itemTranslateOffsets.slice(_this.afterIndex < 0 ? 0 : _this.afterIndex, _this.state.itemDragged).reduce(function (a, b) {\n              return a + b;\n            }, 0) * -1), 0);\n          }\n        })();\n      }\n\n      _this.dropTimeout = window.setTimeout(_this.finishDrop, removeItem || _this.afterIndex === -2 ? 0 : _this.props.transitionDuration);\n    };\n\n    _this.finishDrop = function () {\n      var removeItem = _this.props.removableByMove && _this.isDraggedItemOutOfBounds();\n\n      if (removeItem || _this.afterIndex > -2 && _this.state.itemDragged !== _this.afterIndex) {\n        _this.props.onChange({\n          oldIndex: _this.state.itemDragged,\n          newIndex: removeItem ? -1 : Math.max(_this.afterIndex, 0),\n          targetRect: _this.ghostRef.current.getBoundingClientRect()\n        });\n      }\n\n      _this.getChildren().forEach(function (item) {\n        utils_1.setItemTransition(item, 0);\n        utils_1.transformItem(item, null);\n      });\n\n      _this.setState({\n        itemDragged: -1,\n        scrollingSpeed: 0\n      });\n\n      _this.afterIndex = -2; // sometimes the scroll gets messed up after the drop, fix:\n\n      if (_this.lastScroll > 0) {\n        _this.listRef.current.scrollTop = _this.lastScroll;\n        _this.lastScroll = 0;\n      }\n    };\n\n    _this.onKeyDown = function (e) {\n      var selectedItem = _this.state.selectedItem;\n\n      var index = _this.getTargetIndex(e);\n\n      if (utils_1.checkIfInteractive(e.target, e.currentTarget)) {\n        return;\n      }\n\n      if (index === -1) return;\n\n      if (e.key === ' ') {\n        e.preventDefault();\n\n        if (selectedItem === index) {\n          if (selectedItem !== _this.needle) {\n            _this.getChildren().forEach(function (item) {\n              utils_1.setItemTransition(item, 0);\n              utils_1.transformItem(item, null);\n            });\n\n            _this.props.onChange({\n              oldIndex: selectedItem,\n              newIndex: _this.needle,\n              targetRect: _this.getChildren()[_this.needle].getBoundingClientRect()\n            });\n\n            _this.getChildren()[_this.needle].focus();\n          }\n\n          _this.setState({\n            selectedItem: -1,\n            liveText: _this.props.voiceover.dropped(selectedItem + 1, _this.needle + 1)\n          });\n\n          _this.needle = -1;\n        } else {\n          _this.setState({\n            selectedItem: index,\n            liveText: _this.props.voiceover.lifted(index + 1)\n          });\n\n          _this.needle = index;\n\n          _this.calculateOffsets();\n        }\n      }\n\n      if ((e.key === 'ArrowDown' || e.key === 'j') && selectedItem > -1 && _this.needle < _this.props.values.length - 1) {\n        e.preventDefault();\n        var offset = utils_1.getTranslateOffset(_this.getChildren()[selectedItem]);\n        _this.needle++;\n\n        _this.animateItems(_this.needle, selectedItem, offset, true);\n\n        _this.setState({\n          liveText: _this.props.voiceover.moved(_this.needle + 1, false)\n        });\n      }\n\n      if ((e.key === 'ArrowUp' || e.key === 'k') && selectedItem > -1 && _this.needle > 0) {\n        e.preventDefault();\n        var offset = utils_1.getTranslateOffset(_this.getChildren()[selectedItem]);\n        _this.needle--;\n\n        _this.animateItems(_this.needle, selectedItem, offset, true);\n\n        _this.setState({\n          liveText: _this.props.voiceover.moved(_this.needle + 1, true)\n        });\n      }\n\n      if (e.key === 'Escape' && selectedItem > -1) {\n        _this.getChildren().forEach(function (item) {\n          utils_1.setItemTransition(item, 0);\n          utils_1.transformItem(item, null);\n        });\n\n        _this.setState({\n          selectedItem: -1,\n          liveText: _this.props.voiceover.canceled(selectedItem + 1)\n        });\n\n        _this.needle = -1;\n      }\n\n      if ((e.key === 'Tab' || e.key === 'Enter') && selectedItem > -1) {\n        e.preventDefault();\n      }\n    };\n\n    _this.schdOnMouseMove = utils_1.schd(_this.onMouseMove);\n    _this.schdOnTouchMove = utils_1.schd(_this.onTouchMove);\n    _this.schdOnEnd = utils_1.schd(_this.onEnd);\n    return _this;\n  }\n\n  List.prototype.componentDidMount = function () {\n    this.calculateOffsets();\n    document.addEventListener('touchstart', this.onMouseOrTouchStart, {\n      passive: false,\n      capture: false\n    });\n    document.addEventListener('mousedown', this.onMouseOrTouchStart);\n  };\n\n  List.prototype.componentDidUpdate = function (_prevProps, prevState) {\n    if (prevState.scrollingSpeed !== this.state.scrollingSpeed && prevState.scrollingSpeed === 0) {\n      this.doScrolling();\n    }\n  };\n\n  List.prototype.componentWillUnmount = function () {\n    document.removeEventListener('touchstart', this.onMouseOrTouchStart);\n    document.removeEventListener('mousedown', this.onMouseOrTouchStart);\n  };\n\n  List.prototype.render = function () {\n    var _this = this;\n\n    var baseStyle = {\n      userSelect: 'none',\n      touchAction: 'none',\n      WebkitUserSelect: 'none',\n      MozUserSelect: 'none',\n      msUserSelect: 'none',\n      boxSizing: 'border-box',\n      position: 'relative'\n    };\n\n    var ghostStyle = __assign(__assign({}, baseStyle), {\n      top: this.state.targetY,\n      left: this.state.targetX,\n      width: this.state.targetWidth,\n      height: this.state.targetHeight,\n      position: 'fixed',\n      marginTop: 0\n    });\n\n    return React.createElement(React.Fragment, null, this.props.renderList({\n      children: this.props.values.map(function (value, index) {\n        var isHidden = index === _this.state.itemDragged;\n        var isSelected = index === _this.state.selectedItem;\n        var isDisabled = // @ts-ignore\n        _this.props.values[index] && _this.props.values[index].disabled;\n        var props = {\n          key: index,\n          tabIndex: isDisabled ? -1 : 0,\n          'aria-roledescription': _this.props.voiceover.item(index + 1),\n          onKeyDown: _this.onKeyDown,\n          style: __assign(__assign({}, baseStyle), {\n            visibility: isHidden ? 'hidden' : undefined,\n            zIndex: isSelected ? 5000 : 0\n          })\n        };\n        return _this.props.renderItem({\n          value: value,\n          props: props,\n          index: index,\n          isDragged: false,\n          isSelected: isSelected,\n          isOutOfBounds: false\n        });\n      }),\n      isDragged: this.state.itemDragged > -1,\n      props: {\n        ref: this.listRef\n      }\n    }), this.state.itemDragged > -1 && ReactDOM.createPortal(this.props.renderItem({\n      value: this.props.values[this.state.itemDragged],\n      props: {\n        ref: this.ghostRef,\n        style: ghostStyle,\n        onWheel: this.onWheel\n      },\n      index: this.state.itemDragged,\n      isDragged: true,\n      isSelected: false,\n      isOutOfBounds: this.state.itemDraggedOutOfBounds > -1\n    }), document.body), React.createElement(\"div\", {\n      \"aria-live\": \"assertive\",\n      role: \"log\",\n      \"aria-atomic\": \"true\",\n      style: {\n        position: 'absolute',\n        width: '1px',\n        height: '1px',\n        margin: '-1px',\n        border: '0px',\n        padding: '0px',\n        overflow: 'hidden',\n        clip: 'react(0px, 0px, 0px, 0px)',\n        clipPath: 'inset(100%)'\n      }\n    }, this.state.liveText));\n  };\n\n  List.defaultProps = {\n    transitionDuration: 300,\n    lockVertically: false,\n    removableByMove: false,\n    voiceover: {\n      item: function (position) {\n        return \"You are currently at a draggable item at position \" + position + \". Press space bar to lift.\";\n      },\n      lifted: function (position) {\n        return \"You have lifted item at position \" + position + \". Press j to move down, k to move up, space bar to drop and escape to cancel.\";\n      },\n      moved: function (position, up) {\n        return \"You have moved the lifted item \" + (up ? 'up' : 'down') + \" to position \" + position + \". Press j to move down, k to move up, space bar to drop and escape to cancel.\";\n      },\n      dropped: function (from, to) {\n        return \"You have dropped the item. It has moved from position \" + from + \" to \" + to + \".\";\n      },\n      canceled: function (position) {\n        return \"You have cancelled the movement. The item has returned to its starting position of \" + position + \".\";\n      }\n    }\n  };\n  return List;\n}(React.Component);\n\nexports.default = List;","map":{"version":3,"sources":["/Users/palp/now/QMI/question-interface-managment/node_modules/react-movable/lib/List.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__importStar","mod","__esModule","result","k","defineProperty","exports","value","React","require","ReactDOM","utils_1","AUTOSCROLL_ACTIVE_OFFSET","AUTOSCROLL_SPEED_RATIO","List","_super","props","_this","listRef","createRef","ghostRef","topOffsets","itemTranslateOffsets","initialYOffset","lastScroll","lastYOffset","lastListYOffset","needle","afterIndex","state","itemDragged","itemDraggedOutOfBounds","selectedItem","initialX","initialY","targetX","targetY","targetHeight","targetWidth","liveText","scrollingSpeed","scrollWindow","doScrolling","_a","listEl","current","window","requestAnimationFrame","scrollTo","pageXOffset","pageYOffset","scrollTop","getChildren","from","children","console","warn","calculateOffsets","map","item","getBoundingClientRect","top","getTranslateOffset","getTargetIndex","e","findIndex","child","target","contains","onMouseOrTouchStart","dropTimeout","clearTimeout","finishDrop","isTouch","isTouchEvent","button","index","values","disabled","listItemTouched","handle","querySelector","checkIfInteractive","preventDefault","beforeDrag","elements","opts","passive","document","addEventListener","schdOnEnd","schdOnTouchMove","schdOnMouseMove","onStart","touches","clientX","clientY","getYOffset","listScroll","setState","targetRect","targetStyles","getComputedStyle","left","parseInt","height","width","onMouseMove","cancelable","onMove","onTouchMove","onWheel","deltaY","moveOtherItems","transformItem","lockVertically","autoScrolling","itemVerticalCenter","offset","currentYOffset","isDraggedItemOutOfBounds","removableByMove","binarySearch","animateItems","bottom","viewportHeight","innerHeight","documentElement","clientHeight","Math","round","scrollHeight","movedItem","animateMovedItem","forEach","setItemTransition","transitionDuration","slice","reduce","a","initialRect","abs","onEnd","removeEventListener","removeItem","schd","setTimeout","onChange","oldIndex","newIndex","max","onKeyDown","currentTarget","key","focus","voiceover","dropped","lifted","moved","canceled","componentDidMount","capture","componentDidUpdate","_prevProps","prevState","componentWillUnmount","render","baseStyle","userSelect","touchAction","WebkitUserSelect","MozUserSelect","msUserSelect","boxSizing","position","ghostStyle","marginTop","createElement","Fragment","renderList","isHidden","isSelected","isDisabled","tabIndex","style","visibility","undefined","zIndex","renderItem","isDragged","isOutOfBounds","ref","createPortal","body","role","margin","border","padding","overflow","clip","clipPath","defaultProps","up","to","Component","default"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __importStar(require(\"react\"));\nvar ReactDOM = __importStar(require(\"react-dom\"));\nvar utils_1 = require(\"./utils\");\nvar AUTOSCROLL_ACTIVE_OFFSET = 200;\nvar AUTOSCROLL_SPEED_RATIO = 10;\nvar List = /** @class */ (function (_super) {\n    __extends(List, _super);\n    function List(props) {\n        var _this = _super.call(this, props) || this;\n        _this.listRef = React.createRef();\n        _this.ghostRef = React.createRef();\n        _this.topOffsets = [];\n        _this.itemTranslateOffsets = [];\n        _this.initialYOffset = 0;\n        _this.lastScroll = 0;\n        _this.lastYOffset = 0;\n        _this.lastListYOffset = 0;\n        _this.needle = -1;\n        _this.afterIndex = -2;\n        _this.state = {\n            itemDragged: -1,\n            itemDraggedOutOfBounds: -1,\n            selectedItem: -1,\n            initialX: 0,\n            initialY: 0,\n            targetX: 0,\n            targetY: 0,\n            targetHeight: 0,\n            targetWidth: 0,\n            liveText: '',\n            scrollingSpeed: 0,\n            scrollWindow: false\n        };\n        _this.doScrolling = function () {\n            var _a = _this.state, scrollingSpeed = _a.scrollingSpeed, scrollWindow = _a.scrollWindow;\n            var listEl = _this.listRef.current;\n            window.requestAnimationFrame(function () {\n                if (scrollWindow) {\n                    window.scrollTo(window.pageXOffset, window.pageYOffset + scrollingSpeed * 1.5);\n                }\n                else {\n                    listEl.scrollTop += scrollingSpeed;\n                }\n                if (scrollingSpeed !== 0) {\n                    _this.doScrolling();\n                }\n            });\n        };\n        _this.getChildren = function () {\n            if (_this.listRef && _this.listRef.current) {\n                return Array.from(_this.listRef.current.children);\n            }\n            console.warn('No items found in the List container. Did you forget to pass & spread the `props` param in renderList?');\n            return [];\n        };\n        _this.calculateOffsets = function () {\n            _this.topOffsets = _this.getChildren().map(function (item) { return item.getBoundingClientRect().top; });\n            _this.itemTranslateOffsets = _this.getChildren().map(function (item) {\n                return utils_1.getTranslateOffset(item);\n            });\n        };\n        _this.getTargetIndex = function (e) {\n            return _this.getChildren().findIndex(function (child) { return child === e.target || child.contains(e.target); });\n        };\n        _this.onMouseOrTouchStart = function (e) {\n            if (_this.dropTimeout && _this.state.itemDragged > -1) {\n                window.clearTimeout(_this.dropTimeout);\n                _this.finishDrop();\n            }\n            var isTouch = utils_1.isTouchEvent(e);\n            if (!isTouch && e.button !== 0)\n                return;\n            var index = _this.getTargetIndex(e);\n            if (index === -1 ||\n                // @ts-ignore\n                (_this.props.values[index] && _this.props.values[index].disabled))\n                return;\n            var listItemTouched = _this.getChildren()[index];\n            var handle = listItemTouched.querySelector('[data-movable-handle]');\n            if (handle && !handle.contains(e.target)) {\n                return;\n            }\n            if (utils_1.checkIfInteractive(e.target, listItemTouched)) {\n                return;\n            }\n            e.preventDefault();\n            _this.props.beforeDrag &&\n                _this.props.beforeDrag({\n                    elements: _this.getChildren(),\n                    index: index\n                });\n            if (isTouch) {\n                var opts = { passive: false };\n                document.addEventListener('touchend', _this.schdOnEnd, opts);\n                document.addEventListener('touchmove', _this.schdOnTouchMove, opts);\n                document.addEventListener('touchcancel', _this.schdOnEnd, opts);\n            }\n            else {\n                document.addEventListener('mousemove', _this.schdOnMouseMove);\n                document.addEventListener('mouseup', _this.schdOnEnd);\n            }\n            _this.onStart(listItemTouched, isTouch ? e.touches[0].clientX : e.clientX, isTouch ? e.touches[0].clientY : e.clientY, index);\n        };\n        _this.getYOffset = function () {\n            var listScroll = _this.listRef.current\n                ? _this.listRef.current.scrollTop\n                : 0;\n            return window.pageYOffset + listScroll;\n        };\n        _this.onStart = function (target, clientX, clientY, index) {\n            if (_this.state.selectedItem > -1) {\n                _this.setState({ selectedItem: -1 });\n                _this.needle = -1;\n            }\n            var targetRect = target.getBoundingClientRect();\n            var targetStyles = window.getComputedStyle(target);\n            _this.calculateOffsets();\n            _this.initialYOffset = _this.getYOffset();\n            _this.lastYOffset = window.pageYOffset;\n            _this.lastListYOffset = _this.listRef.current.scrollTop;\n            _this.setState({\n                itemDragged: index,\n                targetX: targetRect.left - parseInt(targetStyles['margin-left'], 10),\n                targetY: targetRect.top - parseInt(targetStyles['margin-top'], 10),\n                targetHeight: targetRect.height,\n                targetWidth: targetRect.width,\n                initialX: clientX,\n                initialY: clientY\n            });\n        };\n        _this.onMouseMove = function (e) {\n            e.cancelable && e.preventDefault();\n            _this.onMove(e.clientX, e.clientY);\n        };\n        _this.onTouchMove = function (e) {\n            e.cancelable && e.preventDefault();\n            _this.onMove(e.touches[0].clientX, e.touches[0].clientY);\n        };\n        _this.onWheel = function (e) {\n            if (_this.state.itemDragged < 0)\n                return;\n            _this.lastScroll = _this.listRef.current.scrollTop += e.deltaY;\n            _this.moveOtherItems();\n        };\n        _this.onMove = function (clientX, clientY) {\n            if (_this.state.itemDragged === -1)\n                return null;\n            utils_1.transformItem(_this.ghostRef.current, clientY - _this.state.initialY, _this.props.lockVertically ? 0 : clientX - _this.state.initialX);\n            _this.autoScrolling(clientY);\n            _this.moveOtherItems();\n        };\n        _this.moveOtherItems = function () {\n            var targetRect = _this.ghostRef.current.getBoundingClientRect();\n            var itemVerticalCenter = targetRect.top + targetRect.height / 2;\n            var offset = utils_1.getTranslateOffset(_this.getChildren()[_this.state.itemDragged]);\n            var currentYOffset = _this.getYOffset();\n            // adjust offsets if scrolling happens during the item movement\n            if (_this.initialYOffset !== currentYOffset) {\n                _this.topOffsets = _this.topOffsets.map(function (offset) { return offset - (currentYOffset - _this.initialYOffset); });\n                _this.initialYOffset = currentYOffset;\n            }\n            if (_this.isDraggedItemOutOfBounds() && _this.props.removableByMove) {\n                _this.afterIndex = _this.topOffsets.length + 1;\n            }\n            else {\n                _this.afterIndex = utils_1.binarySearch(_this.topOffsets, itemVerticalCenter);\n            }\n            _this.animateItems(_this.afterIndex === -1 ? 0 : _this.afterIndex, _this.state.itemDragged, offset);\n        };\n        _this.autoScrolling = function (clientY) {\n            var _a = _this.listRef.current.getBoundingClientRect(), top = _a.top, bottom = _a.bottom, height = _a.height;\n            var viewportHeight = window.innerHeight || document.documentElement.clientHeight;\n            // autoscrolling for the window (down)\n            if (bottom > viewportHeight &&\n                viewportHeight - clientY < AUTOSCROLL_ACTIVE_OFFSET) {\n                _this.setState({\n                    scrollingSpeed: Math.round((AUTOSCROLL_ACTIVE_OFFSET - (viewportHeight - clientY)) /\n                        AUTOSCROLL_SPEED_RATIO),\n                    scrollWindow: true\n                });\n                // autoscrolling for the window (up)\n            }\n            else if (top < 0 && clientY < AUTOSCROLL_ACTIVE_OFFSET) {\n                _this.setState({\n                    scrollingSpeed: Math.round((AUTOSCROLL_ACTIVE_OFFSET - clientY) / -AUTOSCROLL_SPEED_RATIO),\n                    scrollWindow: true\n                });\n            }\n            else {\n                if (_this.state.scrollWindow && _this.state.scrollingSpeed !== 0) {\n                    _this.setState({ scrollingSpeed: 0, scrollWindow: false });\n                }\n                // autoscrolling for containers with overflow\n                if (height + 20 < _this.listRef.current.scrollHeight) {\n                    var scrollingSpeed = 0;\n                    if (clientY - top < AUTOSCROLL_ACTIVE_OFFSET) {\n                        scrollingSpeed = Math.round((AUTOSCROLL_ACTIVE_OFFSET - (clientY - top)) /\n                            -AUTOSCROLL_SPEED_RATIO);\n                    }\n                    else if (bottom - clientY < AUTOSCROLL_ACTIVE_OFFSET) {\n                        scrollingSpeed = Math.round((AUTOSCROLL_ACTIVE_OFFSET - (bottom - clientY)) /\n                            AUTOSCROLL_SPEED_RATIO);\n                    }\n                    if (_this.state.scrollingSpeed !== scrollingSpeed) {\n                        _this.setState({ scrollingSpeed: scrollingSpeed });\n                    }\n                }\n            }\n        };\n        _this.animateItems = function (needle, movedItem, offset, animateMovedItem) {\n            if (animateMovedItem === void 0) { animateMovedItem = false; }\n            _this.getChildren().forEach(function (item, i) {\n                utils_1.setItemTransition(item, _this.props.transitionDuration);\n                if (movedItem === i && animateMovedItem) {\n                    if (movedItem === needle) {\n                        return utils_1.transformItem(item, null);\n                    }\n                    utils_1.transformItem(item, movedItem < needle\n                        ? _this.itemTranslateOffsets\n                            .slice(movedItem + 1, needle + 1)\n                            .reduce(function (a, b) { return a + b; }, 0)\n                        : _this.itemTranslateOffsets\n                            .slice(needle, movedItem)\n                            .reduce(function (a, b) { return a + b; }, 0) * -1);\n                }\n                else if (movedItem < needle && i > movedItem && i <= needle) {\n                    utils_1.transformItem(item, -offset);\n                }\n                else if (i < movedItem && movedItem > needle && i >= needle) {\n                    utils_1.transformItem(item, offset);\n                }\n                else {\n                    utils_1.transformItem(item, null);\n                }\n            });\n        };\n        _this.isDraggedItemOutOfBounds = function () {\n            var initialRect = _this.getChildren()[_this.state.itemDragged].getBoundingClientRect();\n            var targetRect = _this.ghostRef.current.getBoundingClientRect();\n            if (Math.abs(initialRect.left - targetRect.left) > targetRect.width) {\n                if (_this.state.itemDraggedOutOfBounds === -1) {\n                    _this.setState({ itemDraggedOutOfBounds: _this.state.itemDragged });\n                }\n                return true;\n            }\n            if (_this.state.itemDraggedOutOfBounds > -1) {\n                _this.setState({ itemDraggedOutOfBounds: -1 });\n            }\n            return false;\n        };\n        _this.onEnd = function (e) {\n            e.cancelable && e.preventDefault();\n            document.removeEventListener('mousemove', _this.schdOnMouseMove);\n            document.removeEventListener('touchmove', _this.schdOnTouchMove);\n            document.removeEventListener('mouseup', _this.schdOnEnd);\n            document.removeEventListener('touchup', _this.schdOnEnd);\n            document.removeEventListener('touchcancel', _this.schdOnEnd);\n            var removeItem = _this.props.removableByMove && _this.isDraggedItemOutOfBounds();\n            if (!removeItem &&\n                _this.props.transitionDuration > 0 &&\n                _this.afterIndex !== -2) {\n                // animate drop\n                utils_1.schd(function () {\n                    utils_1.setItemTransition(_this.ghostRef.current, _this.props.transitionDuration, 'cubic-bezier(.2,1,.1,1)');\n                    if (_this.afterIndex < 1 && _this.state.itemDragged === 0) {\n                        utils_1.transformItem(_this.ghostRef.current, 0, 0);\n                    }\n                    else {\n                        utils_1.transformItem(_this.ghostRef.current, \n                        // compensate window scroll\n                        -(window.pageYOffset - _this.lastYOffset) +\n                            // compensate container scroll\n                            -(_this.listRef.current.scrollTop - _this.lastListYOffset) +\n                            (_this.state.itemDragged < _this.afterIndex\n                                ? _this.itemTranslateOffsets\n                                    .slice(_this.state.itemDragged + 1, _this.afterIndex + 1)\n                                    .reduce(function (a, b) { return a + b; }, 0)\n                                : _this.itemTranslateOffsets\n                                    .slice(_this.afterIndex < 0 ? 0 : _this.afterIndex, _this.state.itemDragged)\n                                    .reduce(function (a, b) { return a + b; }, 0) * -1), 0);\n                    }\n                })();\n            }\n            _this.dropTimeout = window.setTimeout(_this.finishDrop, removeItem || _this.afterIndex === -2 ? 0 : _this.props.transitionDuration);\n        };\n        _this.finishDrop = function () {\n            var removeItem = _this.props.removableByMove && _this.isDraggedItemOutOfBounds();\n            if (removeItem ||\n                (_this.afterIndex > -2 && _this.state.itemDragged !== _this.afterIndex)) {\n                _this.props.onChange({\n                    oldIndex: _this.state.itemDragged,\n                    newIndex: removeItem ? -1 : Math.max(_this.afterIndex, 0),\n                    targetRect: _this.ghostRef.current.getBoundingClientRect()\n                });\n            }\n            _this.getChildren().forEach(function (item) {\n                utils_1.setItemTransition(item, 0);\n                utils_1.transformItem(item, null);\n            });\n            _this.setState({ itemDragged: -1, scrollingSpeed: 0 });\n            _this.afterIndex = -2;\n            // sometimes the scroll gets messed up after the drop, fix:\n            if (_this.lastScroll > 0) {\n                _this.listRef.current.scrollTop = _this.lastScroll;\n                _this.lastScroll = 0;\n            }\n        };\n        _this.onKeyDown = function (e) {\n            var selectedItem = _this.state.selectedItem;\n            var index = _this.getTargetIndex(e);\n            if (utils_1.checkIfInteractive(e.target, e.currentTarget)) {\n                return;\n            }\n            if (index === -1)\n                return;\n            if (e.key === ' ') {\n                e.preventDefault();\n                if (selectedItem === index) {\n                    if (selectedItem !== _this.needle) {\n                        _this.getChildren().forEach(function (item) {\n                            utils_1.setItemTransition(item, 0);\n                            utils_1.transformItem(item, null);\n                        });\n                        _this.props.onChange({\n                            oldIndex: selectedItem,\n                            newIndex: _this.needle,\n                            targetRect: _this.getChildren()[_this.needle].getBoundingClientRect()\n                        });\n                        _this.getChildren()[_this.needle].focus();\n                    }\n                    _this.setState({\n                        selectedItem: -1,\n                        liveText: _this.props.voiceover.dropped(selectedItem + 1, _this.needle + 1)\n                    });\n                    _this.needle = -1;\n                }\n                else {\n                    _this.setState({\n                        selectedItem: index,\n                        liveText: _this.props.voiceover.lifted(index + 1)\n                    });\n                    _this.needle = index;\n                    _this.calculateOffsets();\n                }\n            }\n            if ((e.key === 'ArrowDown' || e.key === 'j') &&\n                selectedItem > -1 &&\n                _this.needle < _this.props.values.length - 1) {\n                e.preventDefault();\n                var offset = utils_1.getTranslateOffset(_this.getChildren()[selectedItem]);\n                _this.needle++;\n                _this.animateItems(_this.needle, selectedItem, offset, true);\n                _this.setState({\n                    liveText: _this.props.voiceover.moved(_this.needle + 1, false)\n                });\n            }\n            if ((e.key === 'ArrowUp' || e.key === 'k') &&\n                selectedItem > -1 &&\n                _this.needle > 0) {\n                e.preventDefault();\n                var offset = utils_1.getTranslateOffset(_this.getChildren()[selectedItem]);\n                _this.needle--;\n                _this.animateItems(_this.needle, selectedItem, offset, true);\n                _this.setState({\n                    liveText: _this.props.voiceover.moved(_this.needle + 1, true)\n                });\n            }\n            if (e.key === 'Escape' && selectedItem > -1) {\n                _this.getChildren().forEach(function (item) {\n                    utils_1.setItemTransition(item, 0);\n                    utils_1.transformItem(item, null);\n                });\n                _this.setState({\n                    selectedItem: -1,\n                    liveText: _this.props.voiceover.canceled(selectedItem + 1)\n                });\n                _this.needle = -1;\n            }\n            if ((e.key === 'Tab' || e.key === 'Enter') && selectedItem > -1) {\n                e.preventDefault();\n            }\n        };\n        _this.schdOnMouseMove = utils_1.schd(_this.onMouseMove);\n        _this.schdOnTouchMove = utils_1.schd(_this.onTouchMove);\n        _this.schdOnEnd = utils_1.schd(_this.onEnd);\n        return _this;\n    }\n    List.prototype.componentDidMount = function () {\n        this.calculateOffsets();\n        document.addEventListener('touchstart', this.onMouseOrTouchStart, {\n            passive: false,\n            capture: false\n        });\n        document.addEventListener('mousedown', this.onMouseOrTouchStart);\n    };\n    List.prototype.componentDidUpdate = function (_prevProps, prevState) {\n        if (prevState.scrollingSpeed !== this.state.scrollingSpeed &&\n            prevState.scrollingSpeed === 0) {\n            this.doScrolling();\n        }\n    };\n    List.prototype.componentWillUnmount = function () {\n        document.removeEventListener('touchstart', this.onMouseOrTouchStart);\n        document.removeEventListener('mousedown', this.onMouseOrTouchStart);\n    };\n    List.prototype.render = function () {\n        var _this = this;\n        var baseStyle = {\n            userSelect: 'none',\n            touchAction: 'none',\n            WebkitUserSelect: 'none',\n            MozUserSelect: 'none',\n            msUserSelect: 'none',\n            boxSizing: 'border-box',\n            position: 'relative'\n        };\n        var ghostStyle = __assign(__assign({}, baseStyle), { top: this.state.targetY, left: this.state.targetX, width: this.state.targetWidth, height: this.state.targetHeight, position: 'fixed', marginTop: 0 });\n        return (React.createElement(React.Fragment, null,\n            this.props.renderList({\n                children: this.props.values.map(function (value, index) {\n                    var isHidden = index === _this.state.itemDragged;\n                    var isSelected = index === _this.state.selectedItem;\n                    var isDisabled = \n                    // @ts-ignore\n                    _this.props.values[index] && _this.props.values[index].disabled;\n                    var props = {\n                        key: index,\n                        tabIndex: isDisabled ? -1 : 0,\n                        'aria-roledescription': _this.props.voiceover.item(index + 1),\n                        onKeyDown: _this.onKeyDown,\n                        style: __assign(__assign({}, baseStyle), { visibility: isHidden ? 'hidden' : undefined, zIndex: isSelected ? 5000 : 0 })\n                    };\n                    return _this.props.renderItem({\n                        value: value,\n                        props: props,\n                        index: index,\n                        isDragged: false,\n                        isSelected: isSelected,\n                        isOutOfBounds: false\n                    });\n                }),\n                isDragged: this.state.itemDragged > -1,\n                props: {\n                    ref: this.listRef\n                }\n            }),\n            this.state.itemDragged > -1 &&\n                ReactDOM.createPortal(this.props.renderItem({\n                    value: this.props.values[this.state.itemDragged],\n                    props: {\n                        ref: this.ghostRef,\n                        style: ghostStyle,\n                        onWheel: this.onWheel\n                    },\n                    index: this.state.itemDragged,\n                    isDragged: true,\n                    isSelected: false,\n                    isOutOfBounds: this.state.itemDraggedOutOfBounds > -1\n                }), document.body),\n            React.createElement(\"div\", { \"aria-live\": \"assertive\", role: \"log\", \"aria-atomic\": \"true\", style: {\n                    position: 'absolute',\n                    width: '1px',\n                    height: '1px',\n                    margin: '-1px',\n                    border: '0px',\n                    padding: '0px',\n                    overflow: 'hidden',\n                    clip: 'react(0px, 0px, 0px, 0px)',\n                    clipPath: 'inset(100%)'\n                } }, this.state.liveText)));\n    };\n    List.defaultProps = {\n        transitionDuration: 300,\n        lockVertically: false,\n        removableByMove: false,\n        voiceover: {\n            item: function (position) {\n                return \"You are currently at a draggable item at position \" + position + \". Press space bar to lift.\";\n            },\n            lifted: function (position) {\n                return \"You have lifted item at position \" + position + \". Press j to move down, k to move up, space bar to drop and escape to cancel.\";\n            },\n            moved: function (position, up) {\n                return \"You have moved the lifted item \" + (up ? 'up' : 'down') + \" to position \" + position + \". Press j to move down, k to move up, space bar to drop and escape to cancel.\";\n            },\n            dropped: function (from, to) {\n                return \"You have dropped the item. It has moved from position \" + from + \" to \" + to + \".\";\n            },\n            canceled: function (position) {\n                return \"You have cancelled the movement. The item has returned to its starting position of \" + position + \".\";\n            }\n        }\n    };\n    return List;\n}(React.Component));\nexports.default = List;\n"]},"metadata":{},"sourceType":"script"}